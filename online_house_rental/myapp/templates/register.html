{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Page</title>
    <link rel="stylesheet" href="{% static 'css/style3.css' %}">
</head>
<body>
    <div class="container">
        <form id="registrationForm" method="POST" onsubmit="return validateForm()">
            <div class="form-group">
                {% csrf_token %}
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required onblur="checkIfEmpty('name')">
                <span id="nameError" style="color: red; display: none;">Please fill out this field.</span>
            </div>
            <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required onblur="checkIfEmpty('address')">
                <span id="addressError" style="color: red; display: none;">Please fill out this field.</span>
            </div>
            <div class="form-group">
                <label for="email">E-mail:</label>
                <input type="email" id="email" name="email" required onblur="checkIfEmpty('email')">
                <span id="emailError" style="color: red; display: none;">Please enter a valid email address.</span>
            </div>
            <div class="form-group">
                <label for="contact">Contact No:</label>
                <input type="text" id="contact" name="contact" required onblur="checkIfEmpty('contact')">
                <span id="contactError" style="color: red; display: none;">Please enter a valid 10-digit phone number.</span>
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required onblur="checkIfEmpty('password')">
                <span id="passwordError" style="color: red; display: none;">Please fill out this field.</span>
            </div>
            <div class="form-group">
                <label for="confirmPassword">Confirm Password:</label>
                <input type="password" id="confirmPassword" name="confirmPassword" required onblur="checkIfEmpty('confirmPassword')">
                <span id="confirmPasswordError" style="color: red; display: none;">Please fill out this field.</span>
            </div>
            <div class="form-group">
                <label for="role">Register as:</label>
                <select id="role" name="role" required onblur="checkIfEmpty('role')">
                    <option value="user">User</option>
                    <option value="owner">Property Owner</option>
                </select>
                <span id="roleError" style="color: red; display: none;">Please fill out this field.</span>
            </div>
            <button type="submit">Register</button>
        </form>
        <script>
        function validateForm() {
            let isValid = true;

            // Name validation
            if (!checkIfEmpty('name')) isValid = false;
            const name = document.getElementById("name").value;
            const namePattern = /^[A-Z][a-zA-Z\s]*$/;
            if (!namePattern.test(name)) {
                document.getElementById("nameError").innerText = "Name should start with a capital letter.";
                document.getElementById("nameError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("nameError").style.display = "none";
            }

            // Address validation
            if (!checkIfEmpty('address')) isValid = false;
            const address = document.getElementById("address").value;
            const addressPattern = /^[A-Z][a-zA-Z0-9\s,.-]*$/;
            if (!addressPattern.test(address)) {
                document.getElementById("addressError").innerText = "Address should start with a capital letter.";
                document.getElementById("addressError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("addressError").style.display = "none";
            }

            // Email validation
            const email = document.getElementById("email").value;
            const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailPattern.test(email)) {
                document.getElementById("emailError").innerText = "Please enter a valid email format (e.g., email@gmail.com).";
                document.getElementById("emailError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("emailError").style.display = "none";
            }

            // Phone number validation
            const phone = document.getElementById("contact").value;
            const phonePattern = /^[789]\d{9}$/;
            if (!phonePattern.test(phone)) {
                document.getElementById("contactError").innerText = "Please enter a valid 10-digit phone number starting with 7, 8, or 9.";
                document.getElementById("contactError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("contactError").style.display = "none";
            }

            // Password validation
            const password = document.getElementById("password").value;
            const passwordPattern = /^(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/;
            if (!passwordPattern.test(password)) {
                document.getElementById("passwordError").innerText = "Password must be at least 8 characters long with at least one special character.";
                document.getElementById("passwordError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("passwordError").style.display = "none";
            }

            // Confirm password validation
            const confirmPassword = document.getElementById("confirmPassword").value;
            if (password !== confirmPassword) {
                document.getElementById("confirmPasswordError").innerText = "Passwords do not match.";
                document.getElementById("confirmPasswordError").style.display = "block";
                isValid = false;
            } else {
                document.getElementById("confirmPasswordError").style.display = "none";
            }

            return isValid;
        }

        // Helper function to check if a field is empty
        function checkIfEmpty(fieldId) {
            const value = document.getElementById(fieldId).value;
            if (!value) {
                document.getElementById(fieldId + "Error").style.display = "block";
                return false;
            } else {
                document.getElementById(fieldId + "Error").style.display = "none";
                return true;
            }
        }
    </script>
        <p>Already have an account? <a href="/login">Login here</a></p>
    </div>
    <!-- <script src="script1.js"></script> -->
</body>
</html>